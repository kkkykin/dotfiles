#+title:      snow-ai
#+date:       [2025-11-24 Mon 23:57]
#+filetags:   :entertainment:
#+identifier: 20251124T235723

* tangle
#+begin_src elisp
(let* ((zr-local-pls (plstore-open "../.global.pls"))
       (host (concat "axonhub." (plist-get (cdr (plstore-get zr-local-pls "host")) :main)))
       (conf-dir (pcase system-type
                   ('windows-nt (substitute-in-file-name "$userprofile/.snow"))
                   (_ (expand-file-name "~/.snow"))))
       (zr-local-pls (plstore-open (expand-file-name "axonhub.pls" zr-secrets-dir)))
       (keys (cdr (plstore-get zr-local-pls "snow-ai"))))
  (print keys)
  (plstore-close zr-local-pls)
  (org-babel-tangle)
  (make-symbolic-link (expand-file-name "_tangle") conf-dir t))
#+end_src

* config
:PROPERTIES:
:header-args:json: :comments no :mkdirp t :var host=(concat host)
:END:

** main
#+begin_src json :tangle (zr-org-by-tangle-dir "config.json")
{
  "proxy": {
    "enabled": false,
    "port": 7890
  }
}
#+end_src

** profiles
:PROPERTIES:
:tangle-dir: _tangle/profiles
:END:

*** default
:PROPERTIES:
:CUSTOM_ID: 0e761f30-c24d-493a-8f37-8e6c3187ac2a
:END:
#+header: :var key=(plist-get keys :cc)
#+begin_src json :tangle (zr-org-by-tangle-dir "default.json")
{
  "snowcfg": {
    "baseUrl": "https://$host/anthropic/v1",
    "apiKey": "$key",
    "requestMethod": "anthropic",
    "anthropicBeta": true,
    "anthropicCacheTTL": "5m",
    "enablePromptOptimization": true,
    "enableAutoCompress": true,
    "thinking": {
      "type": "enabled",
      "budget_tokens": 10000
    },
    "responsesReasoning": {
      "enabled": false,
      "effort": "high"
    },
    "advancedModel": "cc/claude-sonnet-4-5-20250929",
    "basicModel": "cc/claude-sonnet-4-5-20250929",
    "maxContextTokens": 200000,
    "maxTokens": 32000,
    "compactModel": {
      "modelName": "cc/claude-haiku-4-5-20251001"
    }
  }
}
#+end_src

*** codex
#+header: :var host=(plist-get keys :host)
#+header: :var key=(plist-get keys :cx)
#+begin_src json :tangle (zr-org-by-tangle-dir "codex.json")
{
  "snowcfg": {
    "baseUrl": "https://$host/openai/v1",
    "apiKey": "$key",
    "requestMethod": "responses",
    "anthropicBeta": false,
    "anthropicCacheTTL": "5m",
    "enablePromptOptimization": true,
    "enableAutoCompress": true,
    "responsesReasoning": {
      "enabled": true,
      "effort": "high"
    },
    "advancedModel": "gpt-5.1-codex-max",
    "basicModel": "gpt-5.1-codex",
    "maxContextTokens": 400000,
    "maxTokens": 64000,
    "compactModel": {
      "modelName": "gpt-5.1"
    }
  }
}
#+end_src

*** gemini
#+header: :var key=(plist-get keys :gmn)
#+begin_src json :tangle (zr-org-by-tangle-dir "gemini.json")
{
  "snowcfg": {
    "baseUrl": "https://$host/gemini/v1beta",
    "apiKey": "$key",
    "requestMethod": "gemini",
    "anthropicBeta": false,
    "anthropicCacheTTL": "5m",
    "enablePromptOptimization": true,
    "enableAutoCompress": true,
    "geminiThinking": {
      "enabled": true,
      "budget": 1024
    },
    "responsesReasoning": {
      "enabled": false,
      "effort": "high"
    },
    "advancedModel": "gmn/gemini-3-pro-preview",
    "basicModel": "gmn/gemini-2.5-pro",
    "maxContextTokens": 1000000,
    "maxTokens": 32000,
    "compactModel": {
      "modelName": "gmn/gemini-2.5-flash"
    }
  }
}
#+end_src

** codebase
:PROPERTIES:
:CUSTOM_ID: 455bb60f-d48c-4afd-a43f-b66462042925
:END:
#+header: :var key=(plist-get keys :e)
#+begin_src json :mkdirp t :tangle (zr-org-by-tangle-dir "codebase.json")
{
  "enabled": false,
  "enableAgentReview": true,
  "embedding": {
    "modelName": "embed/jina-embeddings-v3",
    "baseUrl": "https://$host/v1",
    "apiKey": "$key",
    "dimensions": 1024
  },
  "batch": {
    "maxLines": 10,
    "concurrency": 3
  }
}
#+end_src

** active
:PROPERTIES:
:CUSTOM_ID: 08a05ab7-8684-40c5-8bc8-dee6496e1edc
:END:
#+begin_src json :tangle (zr-org-by-tangle-dir "active-profile.json")
{
  "activeProfile": "default"
}
#+end_src

** sensitive
#+begin_src json :tangle (zr-org-by-tangle-dir "sensitive-commands.json")
{
  "commands": [
    {
      "id": "rm",
      "pattern": "*rm*",
      "description": "Delete files or directories (rm, rm -rf, etc.)",
      "enabled": false,
      "isPreset": true
    },
    {
      "id": "b3457d23-2ca7-4465-b2bb-11ae314a6d31",
      "pattern": "*rm *",
      "description": "rm",
      "enabled": true,
      "isPreset": false
    }
  ]
}
#+end_src

** headers
#+begin_src json :tangle (zr-org-by-tangle-dir "custom-headers.json")
{
  "active": "1765085633429",
  "schemes": [
    {
      "id": "1765085633429",
      "name": "axonhub-thread",
      "headers": {
        "AH-Thread-Id": "snow-ai"
      },
      "createdAt": "2025-12-07T05:33:53.429Z"
    }
  ]
}
#+end_src
