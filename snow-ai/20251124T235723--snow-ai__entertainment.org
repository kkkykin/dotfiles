#+title:      snow-ai
#+date:       [2025-11-24 Mon 23:57]
#+filetags:   :entertainment:
#+identifier: 20251124T235723

* tangle
#+begin_src elisp
(let* ((zr-local-pls (plstore-open "../.global.pls"))
       (load-host (concat "gpt-load." (plist-get (cdr (plstore-get zr-local-pls "host")) :main)))
       (conf-dir (pcase system-type
                   ('windows-nt (substitute-in-file-name "$userprofile/.snow"))
                   (_ (expand-file-name "~/.snow"))))
       (zr-local-pls (plstore-open "snow-ai.pls"))
       (keys (cdr (plstore-get zr-local-pls "keys"))))
  (plstore-close zr-local-pls)
  (org-babel-tangle)
  (make-symbolic-link (expand-file-name "_tangle") conf-dir t))
#+end_src

* config
:PROPERTIES:
:header-args:json: :comments no :mkdirp t :var load-host=(concat load-host)
:END:

** main
#+begin_src json :tangle (zr-org-by-tangle-dir "config.json")
{
  "proxy": {
    "enabled": false,
    "port": 7890
  }
}
#+end_src

** profiles
:PROPERTIES:
:tangle-dir: _tangle/profiles
:END:

*** default
:PROPERTIES:
:CUSTOM_ID: 0e761f30-c24d-493a-8f37-8e6c3187ac2a
:END:
#+header: :var key=(plist-get keys :cc)
#+begin_src json :tangle (zr-org-by-tangle-dir "default.json")
{
  "snowcfg": {
    "baseUrl": "https://$load-host/proxy/mufasa_dot-cc/v1",
    "apiKey": "$key",
    "requestMethod": "anthropic",
    "anthropicBeta": true,
    "enablePromptOptimization": true,
    "enableAutoCompress": true,
    "thinking": {
      "type": "enabled",
      "budget_tokens": 10000
    },
    "advancedModel": "claude-opus-4-5-20251101",
    "basicModel": "claude-sonnet-4-5-20250929",
    "maxContextTokens": 200000,
    "maxTokens": 32000,
    "compactModel": {
      "modelName": "claude-haiku-4-5-20251001"
    }
  }
}
#+end_src

*** codex
#+header: :var key=(plist-get keys :cx)
#+begin_src json :tangle (zr-org-by-tangle-dir "codex.json")
{
  "snowcfg": {
    "baseUrl": "https://$load-host/proxy/mufasa_dot-cx/v1",
    "apiKey": "$key",
    "requestMethod": "responses",
    "anthropicBeta": false,
    "enablePromptOptimization": true,
    "enableAutoCompress": true,
    "responsesReasoning": {
      "enabled": true,
      "effort": "high"
    },
    "advancedModel": "gpt-5.1-codex-max",
    "basicModel": "gpt-5.1-codex",
    "maxContextTokens": 400000,
    "maxTokens": 64000,
    "compactModel": {
      "modelName": "gpt-5.1"
    }
  }
}
#+end_src

*** gemini
#+header: :var key=(plist-get keys :g)
#+begin_src json :tangle (zr-org-by-tangle-dir "gemini.json")
{
  "snowcfg": {
    "baseUrl": "https://$load-host/proxy/mufasa_dot-g/v1beta",
    "apiKey": "$key",
    "requestMethod": "gemini",
    "anthropicBeta": false,
    "enablePromptOptimization": true,
    "enableAutoCompress": true,
    "geminiThinking": {
      "enabled": true,
      "budget": 1024
    },
    "responsesReasoning": {
      "enabled": false,
      "effort": "high"
    },
    "advancedModel": "gemini-3-pro-preview",
    "basicModel": "gemini-2.5-pro",
    "maxContextTokens": 1000000,
    "maxTokens": 32000,
    "compactModel": {
      "modelName": "gemini-2.5-flash"
    }
  }
}
#+end_src

** codebase
:PROPERTIES:
:CUSTOM_ID: 455bb60f-d48c-4afd-a43f-b66462042925
:END:
#+header: :var key=(plist-get keys :e)
#+begin_src json :mkdirp t :tangle (zr-org-by-tangle-dir "codebase.json")
{
  "enabled": false,
  "enableAgentReview": true,
  "embedding": {
    "modelName": "jina-embeddings-v3",
    "baseUrl": "https://$load-host/proxy/mufasa_dot-e/v1",
    "apiKey": "$key",
    "dimensions": 1024
  },
  "batch": {
    "maxLines": 10,
    "concurrency": 3
  }
}
#+end_src

** active
:PROPERTIES:
:CUSTOM_ID: 08a05ab7-8684-40c5-8bc8-dee6496e1edc
:END:
#+begin_src json :tangle (zr-org-by-tangle-dir "active-profile.json")
{
  "activeProfile": "default"
}
#+end_src

** sensitive
#+begin_src json :tangle (zr-org-by-tangle-dir "sensitive-commands.json")
{
  "commands": [
    {
      "id": "rm",
      "pattern": "*rm*",
      "description": "Delete files or directories (rm, rm -rf, etc.)",
      "enabled": false,
      "isPreset": true
    },
    {
      "id": "rmdir",
      "pattern": "*rmdir*",
      "description": "Remove directories",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "mv-to-trash",
      "pattern": "*mv * /tmp*",
      "description": "Move files to trash/tmp (potential data loss)",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "chmod",
      "pattern": "*chmod*",
      "description": "Change file permissions",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "chown",
      "pattern": "*chown*",
      "description": "Change file ownership",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "dd",
      "pattern": "*dd*",
      "description": "Low-level data copy (disk operations)",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "mkfs",
      "pattern": "*mkfs*",
      "description": "Format filesystem",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "fdisk",
      "pattern": "*fdisk*",
      "description": "Disk partition manipulation",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "killall",
      "pattern": "*killall*",
      "description": "Kill all processes by name",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "pkill",
      "pattern": "*pkill*",
      "description": "Kill processes by pattern",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "reboot",
      "pattern": "*reboot*",
      "description": "Reboot the system",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "shutdown",
      "pattern": "*shutdown*",
      "description": "Shutdown the system",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "sudo",
      "pattern": "*sudo*",
      "description": "Execute commands with superuser privileges",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "su",
      "pattern": "*su*",
      "description": "Switch user",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "curl-post",
      "pattern": "*curl*-X POST*",
      "description": "HTTP POST requests (potential data transmission)",
      "enabled": false,
      "isPreset": true
    },
    {
      "id": "wget",
      "pattern": "*wget*",
      "description": "Download files from internet",
      "enabled": false,
      "isPreset": true
    },
    {
      "id": "git-push",
      "pattern": "*git push*",
      "description": "Push code to remote repository",
      "enabled": false,
      "isPreset": true
    },
    {
      "id": "git-force-push",
      "pattern": "*git push*--force*",
      "description": "Force push to remote repository (destructive)",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "npm-publish",
      "pattern": "*npm publish*",
      "description": "Publish package to npm registry",
      "enabled": true,
      "isPreset": true
    },
    {
      "id": "docker-rm",
      "pattern": "*docker rm*",
      "description": "Remove Docker containers",
      "enabled": false,
      "isPreset": true
    },
    {
      "id": "docker-rmi",
      "pattern": "*docker rmi*",
      "description": "Remove Docker images",
      "enabled": false,
      "isPreset": true
    },
    {
      "id": "b3457d23-2ca7-4465-b2bb-11ae314a6d31",
      "pattern": "*rm *",
      "description": "rm",
      "enabled": true,
      "isPreset": false
    }
  ]
}
#+end_src
